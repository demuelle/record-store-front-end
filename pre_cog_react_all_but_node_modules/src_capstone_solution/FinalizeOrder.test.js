import { render, screen } from '@testing-library/react';
import FinalizeOrder from './FinalizeOrder';

const items = [
  {
    id: 5,
    title: 'Halo 4',
    esrbRating: 'M',
    description: 'FPS',
    price: 49.99,
    studio: '343',
    quantity: 5,
    orderId: 'G-5',
    numOrdered: 1,
  },
  {
    id: 11,
    title: 'Cyberpunk 2077',
    esrbRating: 'M',
    description: 'Action RPG',
    price: 20.99,
    studio: 'CD Projekt',
    quantity: 20,
    orderId: 'G-11',
    numOrdered: 1,
  },
  {
    id: 14,
    title: 'Super Mario Bros',
    esrbRating: 'E',
    description: 'arcade',
    price: 99.99,
    studio: 'Nintendo',
    quantity: 20,
    orderId: 'G-14',
    numOrdered: 1,
  },
  {
    id: 3,
    size: 'XL',
    color: 'Red',
    description: 'Science',
    price: 15.95,
    quantity: 8,
    orderId: 'S-3',
    numOrdered: 1,
  },
];

test('renders correct order total', () => {
  render(<FinalizeOrder items={items} />);

  const itemsTotal = screen.getByText(
    '$' +
      items.reduce((total, item) => {
        total += item.price * item.numOrdered;
        return total;
      }, 0)
  );

  expect(itemsTotal).toBeInTheDocument();
});
